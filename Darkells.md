---
timezone: UTC+8
---

# Draken

**GitHub ID:** Darkells

**Telegram:** @Draken_Zeng

## Self-introduction

热爱技术

## Notes

<!-- Content_START -->
# 2025-11-28
<!-- DAILY_CHECKIN_2025-11-28_START -->
**Gateway（网关）** 是 ZetaChain 跨链架构中的关键基础设施合约，它充当：

-   跨链消息的入口和出口
    
-   资产的托管和释放者
    
-   安全验证的守门人
    
-   跨链调用的代理执行者
    

可以把 Gateway 理解为"区块链之间的海关"，所有跨链的资产和消息都必须经过它的验证和处理。

**Gateway 的核心安全机制**

1\. 权限控制

Swap 合约的关键函数只能被 Gateway 调用

防止任何人伪造跨链消息

确保所有操作都经过验证

2\. 共识验证

ZetaChain 观察者网络多节点验证

需要 2/3 以上节点签名才能执行

防止单点故障和恶意攻击

3\. 失败回滚保护

如果目标链执行失败（如接收地址无法接收代币）

Gateway 会触发 onRevert 函数

自动将资产 swap 回原始代币并退还给发送者

4\. 资产托管

源链 Gateway 锁定原始资产

ZetaChain 铸造等值的 ZRC20 代币

目标链 Gateway 从池中释放对应资产

保证资产总量守恒
<!-- DAILY_CHECKIN_2025-11-28_END -->

# 2025-11-27
<!-- DAILY_CHECKIN_2025-11-27_START -->

-   **ZRC-20 和普通 ERC-20 的直观区别**
    

| 特征 | ZRC-20 代币 | 普通 ERC-20 代币 |
| 部署环境 | 集成到 ZetaChain 的全链智能合约平台。 | 通常存在于单一 EVM 生态系统（例如 Ethereum）中。 |
| 核心功能 | 具备跨链编排（orchestrate）任何连接链上原生资产的能力。 | 缺乏直接管理或代表其他区块链上原生资产的能力。 |
| 代币来源 | 可代表连接区块链上的原生 Gas 代币和白名单 ERC-20 代币。 | 通常只代表其部署链上的资产。 |
| 资产来源关联 | 来自不同连接链的“相同”ERC-20 代币，会被表示为不同的 ZRC-20 代币（例如，来自 Ethereum 的 USDT 和来自 BSC 的 USDT 是不同的 ZRC-20）。 | 资产通常不区分其从哪个外部链而来。 |
| 铸造方式 | 只能由 ZetaChain 协议铸造。 | 通常由部署代币的智能合约根据预设逻辑进行铸造。 |
| 取款能力（关键） | 可以从 ZetaChain 取款（withdrawn）到连接的区块链上。取款时，ZRC-20 在 ZetaChain 上销毁，原生/ERC-20 代币从托管合约转移到连接链。 | 如果部署在 ZetaChain 上，它不具备 ZRC-20 属性，不能取款到连接链。 |
| 存款机制 | 存款时，原生/ERC-20 代币被转移并锁定在 TSS 地址/ERC-20 托管合约中，随后 ZRC-20 在 ZetaChain 上铸造。 | 不涉及跨链锁定和铸造流程。 |
| 本质关系 | 是标准 ERC-20 代币的扩展，增加了管理所有连接链上资产的能力。 | 基础的可替代代币标准（例如，在以太坊生态系统中找到的标准）。 |

-   ZRC-20 是集成到 ZetaChain 全链智能合约平台中的一种代币标准。它使开发者能够构建可以从单一位置协调任何连接链上原生资产的 dApp，简化了全链 DeFi 协议的开发。
    
-   在存款过程中，原生的或 ERC-20 的代币被转移到 TSS 地址或 ERC-20 托管合约中并被锁定。随后，ZRC-20 代币在 ZetaChain 上被铸造，并存入接收者的地址。
    
-   在提款过程中，ZRC-20 代币在 ZetaChain 上被销毁。然后，相应的原生或 ERC-20 代币从 TSS 地址或 ERC-20 托管合约转移到连接链上的接收者地址。
    
-   只有 ZetaChain 协议才能铸造 ZRC-20 代币。在 ZetaChain 上部署的普通 ERC-20 代币不具备 ZRC-20 的属性，也无法从 ZetaChain 提取到连接的链上。
    
-   来自不同链的“相同”ERC-20 代币在 ZetaChain 上被表示为两个不同的 ZRC-20 代币。例如，以太坊的 USDT 和 BSC 的 USDT 是两种不同的 ZRC-20 资产，但它们之间可以进行交换。
<!-- DAILY_CHECKIN_2025-11-27_END -->

# 2025-11-26
<!-- DAILY_CHECKIN_2025-11-26_START -->


**1\. 什么是 ZetaChain 通用应用？在代币交换的场景下，它解决了什么核心问题？**

ZetaChain 通用应用是一个部署在 ZetaChain 上的智能合约，可以从任何连接的链上被调用。在代币交换场景下，它解决了用户需要与跨链桥或中心化交易所进行复杂交互的问题，允许用户通过单笔交易完成跨链、跨资产的兑换。

**2\. 在跨链交换流程中，ZRC-20 代币标准扮演了什么角色？**

ZRC-20 是外部资产在 ZetaChain 上的原生表示。它在保留原始资产属性的同时，实现了在 ZetaChain 上的可编程行为，例如，它使得资产可以被用于智能合约逻辑（如交换），并支持跨链提款操作。

**3\.** `Swap` **合约中的** `onCall` **函数的用途是什么？**`onlyGateway` **修饰符有何重要意义？**

`onCall` 函数是通用应用的唯一入口点，用于接收和处理来自其他链的跨链调用和代币。`onlyGateway` 修饰符确保该函数只能被受信任的网关（Gateway）调用，从而保证了合约交互的安全性和可信度。

**4\.** `Swap` **合约是如何处理目标链上的交易燃料费（gas fee）的？**

合约首先通过调用 `withdrawGasFee()` 函数查询提现到目标链所需的燃料费金额。然后，它使用 ZetaChain 上的 DEX（如 Uniswap v2）将一小部分传入的代币兑换成目标链燃料费所对应的 ZRC-20 代币，从而为用户预付了目标链的执行费用。

**5\.** `onCall` **函数解码的消息负载（message payload）包含哪些信息？其用途是什么？**

消息负载包含三个值：目标代币的 ZRC-20 地址、接收者在目标链上的原始字节地址 (`bytes`)，以及一个决定是否将代币提现到另一条链的布尔标志 (`withdrawFlag`)。这些信息共同指导了合约的交换和提款行为。

**6\.** `onRevert` **函数的作用是什么？它如何确保一致的回退和退款流程？**

`onRevert` 函数是当目标链上的调用或转账失败时，由网关触发的回退处理函数。它通过解码预设的回退信息（如原始发送者和代币），执行确定性的退款逻辑，将资产返还给原始发送者，从而实现跨链一致的失败处理机制。

**7\. 为什么合约中的接收者地址要使用原始的** `bytes` **类型，而不是标准的** `address` **类型？**

使用 `bytes` 类型可以使合约实现链无关性。这种格式可以兼容 EVM、比特币、Solana 等不同区块链的地址格式，使得同一个合约能够服务于所有支持的链，而无需为特定链的地址格式进行定制。

**8\. 在跨链交易的入站（进入ZetaChain）和出站（离开ZetaChain）两个阶段，网关（Gateway）分别扮演什么角色？**

在入站阶段，源链上的网关将用户的原生代币包装成 ZRC-20 代币，并将其连同消息负载一起传递给 ZetaChain 上的通用应用。在出站阶段，ZetaChain 上的网关在收到应用的提款请求后，销毁相应的 ZRC-20 代币，并在目标链上释放等值的原生资产给指定接收者。

**9\. 教程中使用了 Uniswap v2 流动性池。关于使用这些池子，教程提到了什么注意事项，并为真实世界的应用推荐了哪些替代方案？**

教程指出，其使用的 Uniswap v2 池主要用于 ZetaChain 内部的小额兑换（如获取回退交易的燃料费），可能没有足够流动性支持大额兑换。对于真实世界的应用，建议使用由活跃的 DEX（如 Beam 或 Zuno）维护的流动性池。

**10\. 在收到代币并查询完燃料费后，合约内部的代币交换逻辑主要包含哪两个步骤？**

第一步，如果输入的代币不是目标链的燃料代币（gas token），合约会先将一小部分输入代币兑换成足够支付 `gasFee` 的 ZRC-20 燃料代币。第二步，合约会将剩余的全部输入代币兑换成用户指定的目标代币。

Swap 工作流程

![image.png](https://raw.githubusercontent.com/IntensiveCoLearning/Universal-AI/main/assets/Darkells/images/2025-11-26-1764168722181-image.png)
<!-- DAILY_CHECKIN_2025-11-26_END -->

# 2025-11-25
<!-- DAILY_CHECKIN_2025-11-25_START -->



1\. **ZetaChain的技术栈核心组件**

ZetaChain的技术栈由Cosmos SDK、CometBFT共识引擎和Cosmos EVM构成。Cosmos SDK提供了模块化和灵活可升级的架构；CometBFT通过其即时共识机制实现了快速最终性；而Cosmos EVM则确保了与以太坊的完全兼容性，使以太坊智能合约无需修改即可运行。

2\. **ZetaChain的“中心辐射”架构模型及其在处理跨链交易中的作用。**

ZetaChain采用“中心辐射”（Hub-and-Spoke）架构，其中ZetaChain本身是“中心”（Hub），作为所有跨链活动的协调层。所有连接的外部区块链（如EVM链、Solana、比特币）则是“辐射”（Spokes）。这种模型确保所有跨链消息都通过ZetaChain处理，从而实现一致的处理逻辑、简化的新链集成以及统一的安全验证。

3\. **ZetaChain网络中两种主要的验证者角色。**

ZetaChain的两种主要验证者角色是核心验证者（Core Validators）和观察者-签名者验证者（Observer-Signer Validators）。核心验证者负责运行节点、参与共识以生产区块和维护网络状态。观察者-签名者验证者则负责监控连接链上的跨链事件、对事件有效性进行投票，并共同签署出站交易。

4\. **阈值签名方案（TSS）在ZetaChain的出站交易中作用**

阈值签名方案（TSS）是一种密码学技术，允许多方协作签署一笔交易，而没有任何单个实体持有完整的私钥。在ZetaChain中，它被用于签署发往连接链的出站交易，通过分散签名权来确保没有单个验证者能够控制资产，从而极大地增强了安全性。

5\. **描述Fungible模块在ZetaChain生态系统中的核心功能。**

Fungible模块的核心功能是促进ZetaChain上可替代代币（ZRC-20）的部署和管理，这些代币代表了来自外部连接链的资产。它负责处理相应ZRC-20合约的部署、管理这些代币的资金池和流动性，并提供从连接链向ZetaChain上的全链智能合约存款和调用的功能。

6\. **ZetaChain的经济激励和绑定权益模型。**

ZetaChain要求验证者以ZETA代币的形式质押绑定权益，这些权益在其行为不当或疏忽时面临被罚没（slashing）的风险。同时，诚实行事的验证者可以通过处理交易和维护网络安全来赚取交易费和区块奖励。这种奖惩机制将验证者的经济利益与网络健康和安全紧密结合在一起。

7\. **一个从外部连接链到ZetaChain的“入站交易”的主要步骤。**

一个入站交易主要包括四个步骤：

-   **发起**：用户在连接链上与网关合约交互。
    
-   **观察**：观察者-签名者验证者检测到事件并提取交易细节。
    
-   **投票**：验证者们在ZetaChain上对该事件的有效性进行投票，需达到多数同意。
    
-   **执行**：投票通过后，ZetaChain更新CCTX记录，并根据交易内容铸造资产或调用目标合约。
    

8\. **GatewayZEVM和GatewayEVM这两个协议合约的区别。**

GatewayZEVM和GatewayEVM是功能相反的网关合约。

GatewayZEVM部署在ZetaChain上，是**出站**交易（从ZetaChain到外部链）的主要入口点，处理资产提取和外部合约调用。

GatewayEVM部署在连接的EVM链上，是**入站**交易（从外部链到ZetaChain）的入口点，处理存款和向ZetaChain的合约调用。

9\. **CrossChain模块在管理跨链交易（CCTX）生命周期中的作用。**

CrossChain模块是跨链交易（CCTX）的中央账本。它负责在入站事件被验证后创建新的CCTX记录，根据后续事件（如`PendingOutbound`、`OutboundMined`）更新交易状态，并存储包括发送方、接收方、资产和交易哈希在内的详细参数。

10\. **ZetaChain为开发者解决了哪些构建跨链应用时的痛点？**

ZetaChain为开发者提供了一个统一的平台来处理跨链消息、资产转移和合约调用，从而消除了为不同链维护不同SDK、桥接和安全模型的复杂性。其快速的最终性和统一的协议使开发者可以专注于应用逻辑本身，而不是底层基础设施，无论是面向EVM链、Solana还是比特币。
<!-- DAILY_CHECKIN_2025-11-25_END -->

# 2025-11-24
<!-- DAILY_CHECKIN_2025-11-24_START -->




## **它到底是什么？**

ZetaChain是一个**独立的区块链**（不是以太坊L2，也不是跨链桥），核心目标就一条：  
**让不同链之间的交互像单链操作一样简单。**

-   比如：用比特币钱包里的BTC，直接打赏给以太坊地址上的创作者——全程只需1次确认，不用管gas费、不用等桥接。
    
-   本质是**把跨链复杂性藏在底层**，用户/开发者只看到结果。
    

## **它能干什么？**

1.  **Gas抽象**：
    
    -   用户只需持有ZETA代币，就能支付所有链的gas费（比如用ZETA付比特币矿工费+以太坊gas）。
        
    -   _亲测_：在测试网用0.01 BTC打赏以太坊地址，只扣了0.006 ZETA（约$0.003），没碰过BTC或ETH。
        
2.  **全链智能合约**：
    
    -   开发者用Solidity写代码，能直接读写其他链的状态（比如合约里查比特币余额）。
        
    -   _关键点_：不是“兼容所有链的虚拟机”，而是通过系统合约**安全地调用跨链数据**。
        
3.  **原子级跨链操作**：
    
    -   传统桥：BTC→WBTC→Swap→提现，任一环节失败资产可能卡住。
        
    -   ZetaChain：BTC→ETH一步完成，失败则全部回滚。
        

关于统一gas模型与官网例子测试的思考

指的是 **当在 ZetaChain 上发起跨链操作**，只需要 ZETA Gas，不需要准备其他链的 Gas。

但**当从外链（Base、BNB、Polygon）主动发交易时，必须使用外链的 Gas Token。**
<!-- DAILY_CHECKIN_2025-11-24_END -->
<!-- Content_END -->
